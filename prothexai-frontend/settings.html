<!DOCTYPE html>
<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>ProthexaI - Clinical Settings</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@300;400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <!-- Required Libraries -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="js/guard.js"></script>

    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ec5b13",
                        "background-dark": "#0B1419",
                        "card-dark": "#16222a",
                        "border-dark": "#1E2F36",
                        "text-primary": "#E6EDF3",
                        "text-secondary": "#8FA3AD",
                        "accent-blue": "#0EA5E9",
                        "accent-green": "#22c55e",
                        "accent-red": "#ef4444",
                        "accent-amber": "#f59e0b"
                    },
                    fontFamily: {
                        "display": ["Public Sans", "sans-serif"]
                    }
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Public Sans', sans-serif;
            background-color: #0B1419;
            color: #E6EDF3;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .glass-card {
            background: rgba(22, 34, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(30, 47, 54, 0.5);
        }

        .glow-unread {
            box-shadow: 0 0 15px rgba(236, 91, 19, 0.1);
            border-left: 3px solid #ec5b13;
        }

        .nav-glow {
            box-shadow: 0 -4px 12px rgba(236, 91, 19, 0.15);
        }

        /* Accordion transition */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
        }

        .accordion-active .accordion-content {
            max-height: 2000px;
            padding-bottom: 1.5rem;
        }

        .accordion-active .arrow-icon {
            transform: rotate(180deg);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: #0B1419;
        }

        ::-webkit-scrollbar-thumb {
            background: #1E2F36;
            border-radius: 10px;
        }
    </style>
</head>

<body class="flex flex-col pb-24">
    <!-- Header -->
    <header
        class="sticky top-0 z-50 bg-background-dark/80 backdrop-blur-md border-b border-border-dark px-6 h-16 flex items-center justify-between">
        <h1 class="text-xl font-bold tracking-tight text-text-primary">Settings</h1>
        <button id="btn-logout"
            class="p-2 rounded-xl hover:bg-card-dark text-accent-red transition-all flex items-center gap-2">
            <span class="material-symbols-outlined text-[20px]">logout</span>
            <span class="text-xs font-bold uppercase tracking-widest hidden sm:inline">Logout</span>
        </button>
    </header>

    <main class="flex-1 w-full max-w-2xl mx-auto p-4 space-y-4">

        <!-- SECTION: ABOUT -->
        <div
            class="accordion-item glass-card rounded-2xl border border-border-dark overflow-hidden transition-all duration-300">
            <button onclick="toggleSection(this)"
                class="w-full flex items-center justify-between p-5 hover:bg-white/5 transition-colors">
                <div class="flex items-center gap-4">
                    <div class="size-10 rounded-xl bg-accent-blue/10 flex items-center justify-center text-accent-blue">
                        <span class="material-symbols-outlined font-bold">info</span>
                    </div>
                    <div class="text-left">
                        <h3 class="font-bold text-text-primary">About System</h3>
                        <p class="text-[10px] text-text-secondary uppercase tracking-widest font-bold">Health &
                            Performance</p>
                    </div>
                </div>
                <span
                    class="material-symbols-outlined arrow-icon transition-transform text-text-secondary">expand_more</span>
            </button>
            <div class="accordion-content px-5">
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="p-3 bg-background-dark rounded-xl border border-border-dark">
                        <p class="text-[9px] text-text-secondary font-bold uppercase tracking-tighter">App Version</p>
                        <p id="app-version" class="text-sm font-bold text-accent-blue">v2.5.0</p>
                    </div>
                    <div class="p-3 bg-background-dark rounded-xl border border-border-dark">
                        <p class="text-[9px] text-text-secondary font-bold uppercase tracking-tighter">Backend</p>
                        <p id="backend-version" class="text-sm font-bold text-accent-green">Stable</p>
                    </div>
                    <div class="p-3 bg-background-dark rounded-xl border border-border-dark">
                        <p class="text-[9px] text-text-secondary font-bold uppercase tracking-tighter">DB Connection</p>
                        <p id="db-status" class="text-sm font-bold text-accent-blue">Cloud Atlas</p>
                    </div>
                    <div class="p-3 bg-background-dark rounded-xl border border-border-dark">
                        <p class="text-[9px] text-text-secondary font-bold uppercase tracking-tighter">API Status</p>
                        <div class="flex items-center gap-2">
                            <span class="size-2 rounded-full bg-accent-green animate-pulse"></span>
                            <span id="api-status" class="text-sm font-bold">Healthy</span>
                        </div>
                    </div>
                </div>

                <h4 class="text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-3">Live Performance
                    Metrics</h4>
                <div id="about-chart" class="w-full h-24 bg-background-dark/50 rounded-xl overflow-hidden"></div>
            </div>
        </div>

        <!-- SECTION: FEEDBACK -->
        <div
            class="accordion-item glass-card rounded-2xl border border-border-dark overflow-hidden transition-all duration-300">
            <button onclick="toggleSection(this)"
                class="w-full flex items-center justify-between p-5 hover:bg-white/5 transition-colors">
                <div class="flex items-center gap-4">
                    <div class="size-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary">
                        <span class="material-symbols-outlined font-bold">chat_bubble</span>
                    </div>
                    <div class="text-left">
                        <h3 class="font-bold text-text-primary">Feedback</h3>
                        <p class="text-[10px] text-text-secondary uppercase tracking-widest font-bold">Community &
                            Reports</p>
                    </div>
                </div>
                <span
                    class="material-symbols-outlined arrow-icon transition-transform text-text-secondary">expand_more</span>
            </button>
            <div class="accordion-content px-5">
                <div class="flex flex-col sm:flex-row gap-6 mb-8">
                    <!-- Donut Chart -->
                    <div class="flex-1 flex flex-col items-center">
                        <div id="feedback-donut" class="relative w-32 h-32"></div>
                        <div class="mt-2 flex gap-4 text-[9px] uppercase tracking-widest font-bold">
                            <span class="flex items-center gap-1"><span
                                    class="size-2 rounded-full bg-accent-red"></span> Bug</span>
                            <span class="flex items-center gap-1"><span
                                    class="size-2 rounded-full bg-accent-amber"></span> Feature</span>
                            <span class="flex items-center gap-1"><span
                                    class="size-2 rounded-full bg-accent-blue"></span> General</span>
                        </div>
                    </div>
                    <!-- Form -->
                    <form id="feedback-form" class="flex-[2] space-y-3">
                        <select id="issue-type"
                            class="w-full bg-background-dark border border-border-dark rounded-xl px-4 py-3 text-sm focus:border-primary outline-none transition-all">
                            <option value="Bug">Report a Bug</option>
                            <option value="Feature">Request Feature</option>
                            <option value="General">General Feedback</option>
                        </select>
                        <textarea id="description" rows="3" placeholder="Describe your experience..."
                            class="w-full bg-background-dark border border-border-dark rounded-xl px-4 py-3 text-sm focus:border-primary outline-none transition-all resize-none"></textarea>
                        <button type="submit"
                            class="w-full bg-primary hover:bg-orange-600 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2">
                            <span id="btn-text">Send Feedback</span>
                            <span id="btn-status-icon"
                                class="material-symbols-outlined text-sm hidden">check_circle</span>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- SECTION: NOTIFICATIONS -->
        <div
            class="accordion-item glass-card rounded-2xl border border-border-dark overflow-hidden transition-all duration-300">
            <button onclick="toggleSection(this)"
                class="w-full flex items-center justify-between p-5 hover:bg-white/5 transition-colors">
                <div class="flex items-center gap-4">
                    <div
                        class="size-10 rounded-xl bg-accent-amber/10 flex items-center justify-center text-accent-amber">
                        <span class="material-symbols-outlined font-bold">notifications</span>
                    </div>
                    <div class="text-left">
                        <h3 class="font-bold text-text-primary">Notifications</h3>
                        <p class="text-[10px] text-text-secondary uppercase tracking-widest font-bold">Recent Alerts &
                            Logs</p>
                    </div>
                </div>
                <span
                    class="material-symbols-outlined arrow-icon transition-transform text-text-secondary">expand_more</span>
            </button>
            <div class="accordion-content px-5">
                <h4 class="text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-3">Timeline (30 Days)
                </h4>
                <div id="notification-timeline" class="w-full h-32 bg-background-dark/50 rounded-xl mb-6"></div>

                <div class="space-y-3 max-h-80 overflow-y-auto pr-1" id="notification-list">
                    <!-- Notifications will be injected here -->
                </div>
            </div>
        </div>

        <!-- SECTION: PRIVACY -->
        <div
            class="accordion-item glass-card rounded-2xl border border-border-dark overflow-hidden transition-all duration-300">
            <button onclick="toggleSection(this)"
                class="w-full flex items-center justify-between p-5 hover:bg-white/5 transition-colors">
                <div class="flex items-center gap-4">
                    <div
                        class="size-10 rounded-xl bg-accent-green/10 flex items-center justify-center text-accent-green">
                        <span class="material-symbols-outlined font-bold">shield</span>
                    </div>
                    <div class="text-left">
                        <h3 class="font-bold text-text-primary">Privacy & Security</h3>
                        <p class="text-[10px] text-text-secondary uppercase tracking-widest font-bold">Encryption & Data
                            Core</p>
                    </div>
                </div>
                <span
                    class="material-symbols-outlined arrow-icon transition-transform text-text-secondary">expand_more</span>
            </button>
            <div class="accordion-content px-5">
                <div class="flex flex-col sm:flex-row items-center gap-8">
                    <!-- Three.js Container -->
                    <div id="canvas-container"
                        class="w-48 h-48 rounded-full bg-background-dark/50 overflow-hidden relative group cursor-pointer">
                        <!-- Tooltip -->
                        <div id="security-tooltip"
                            class="absolute inset-0 bg-background-dark/90 backdrop-blur-md opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-4 text-center">
                            <p class="text-[10px] font-black text-accent-green uppercase tracking-tighter mb-2">Protocol
                                Active</p>
                            <ul class="text-[9px] text-text-secondary font-bold space-y-1">
                                <li>JWT AUTHENTICATION</li>
                                <li>ARGON2 HASHING</li>
                                <li>ATLAS SSL ENCRYPTION</li>
                                <li>ROLE-BASED ACCESS</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Details -->
                    <div class="flex-1 space-y-4">
                        <div class="p-4 bg-background-dark rounded-xl border border-border-dark">
                            <h4 class="text-sm font-bold text-text-primary mb-1">HIPAA Compliant Core</h4>
                            <p class="text-[11px] text-text-secondary leading-relaxed">Your biomechanical data is
                                encrypted end-to-end and stored in medical-grade secure clusters.</p>
                        </div>
                        <div class="flex justify-between items-center px-2">
                            <span class="text-[10px] font-bold text-text-secondary uppercase tracking-widest">Security
                                Score</span>
                            <span class="text-sm font-black text-accent-green">99.8%</span>
                        </div>
                        <div class="w-full h-1 bg-background-dark rounded-full overflow-hidden">
                            <div class="h-full bg-accent-green w-[99.8%]"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Navigation -->
    <nav
        class="fixed bottom-0 left-0 right-0 bg-background-dark border-t border-border-dark px-6 pb-6 pt-3 flex justify-between items-center nav-glow z-20">
        <a class="flex flex-col items-center gap-1 group text-text-secondary transition-colors" href="dashboard.html">
            <span class="material-symbols-outlined group-hover:scale-110 transition-transform">dashboard</span>
            <span class="text-[10px] font-bold uppercase tracking-widest">Dashboard</span>
        </a>
        <a class="flex flex-col items-center gap-1 group text-text-secondary transition-colors" href="analytics.html">
            <span class="material-symbols-outlined group-hover:scale-110 transition-transform">analytics</span>
            <span class="text-[10px] font-bold uppercase tracking-widest">Analytics</span>
        </a>
        <a class="flex flex-col items-center gap-1 group text-text-secondary transition-colors" href="profile.html">
            <span class="material-symbols-outlined group-hover:scale-110 transition-transform">person</span>
            <span class="text-[10px] font-bold uppercase tracking-widest">Profile</span>
        </a>
        <a class="flex flex-col items-center gap-1 group text-primary" href="settings.html">
            <div class="relative">
                <span
                    class="material-symbols-outlined group-hover:scale-110 transition-transform fill-[1]">settings</span>
                <div class="absolute inset-0 bg-primary/20 blur-md rounded-full -z-10"></div>
            </div>
            <span class="text-[10px] font-bold uppercase tracking-widest">Settings</span>
        </a>
    </nav>

    <script type="module" src="js/settings.js"></script>
    <script>
        function toggleSection(btn) {
            const item = btn.parentElement;
            const isActive = item.classList.contains('accordion-active');

            // Close others if needed - Optional
            // document.querySelectorAll('.accordion-item').forEach(el => el.classList.remove('accordion-active'));

            if (isActive) {
                item.classList.remove('accordion-active');
            } else {
                item.classList.add('accordion-active');

                // Trigger chart resize or re-render if needed
                window.dispatchEvent(new Event('resize'));
            }
        }
    </script>
</body>

</html>