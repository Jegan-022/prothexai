# Clinical Risk Triage System - Logic Flow Diagram

## ğŸ”„ Triage Computation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Doctor Requests Triage                       â”‚
â”‚                   GET /doctor/triage                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Fetch All Assigned Patients                        â”‚
â”‚         db["patient_profiles"].find({"doctor_id": ...})         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  For Each      â”‚
                    â”‚  Patient       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fetch Last    â”‚   â”‚ Fetch Days    â”‚   â”‚ Fetch Latest  â”‚
â”‚ 7 Days        â”‚   â”‚ 8-14          â”‚   â”‚ Analysis      â”‚
â”‚ (Current Week)â”‚   â”‚ (Previous Week)â”‚   â”‚ Result        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      COMPUTE METRICS FOR PATIENT          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                   â”‚                   â”‚
        â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Health Score  â”‚   â”‚ Stability     â”‚   â”‚ Activity      â”‚
â”‚ Metrics       â”‚   â”‚ Analysis      â”‚   â”‚ Metrics       â”‚
â”‚               â”‚   â”‚               â”‚   â”‚               â”‚
â”‚ â€¢ Latest      â”‚   â”‚ â€¢ Std Dev of  â”‚   â”‚ â€¢ Abnormal    â”‚
â”‚ â€¢ Weekly Avg  â”‚   â”‚   Symmetry    â”‚   â”‚   Days Count  â”‚
â”‚ â€¢ Previous    â”‚   â”‚ â€¢ Classify:   â”‚   â”‚ â€¢ High Skin   â”‚
â”‚   Week Avg    â”‚   â”‚   Stable/     â”‚   â”‚   Risk Days   â”‚
â”‚ â€¢ Delta       â”‚   â”‚   Moderate/   â”‚   â”‚               â”‚
â”‚               â”‚   â”‚   Unstable    â”‚   â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         ESCALATION DETECTION              â”‚
        â”‚                                           â”‚
        â”‚  Rule 1: Delta < -15?                     â”‚
        â”‚  Rule 2: 3+ Consecutive Abnormal Gait?    â”‚
        â”‚  Rule 3: 2+ Days Low Pressure?            â”‚
        â”‚  Rule 4: 2+ Days High Skin Risk?          â”‚
        â”‚                                           â”‚
        â”‚  IF ANY â†’ escalation_flag = true          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         ADHERENCE SCORING                 â”‚
        â”‚                                           â”‚
        â”‚  adherence_score = (uploads / 7) Ã— 100    â”‚
        â”‚                                           â”‚
        â”‚  Classify:                                â”‚
        â”‚  â€¢ Good: â‰¥70%                             â”‚
        â”‚  â€¢ Moderate: 40-69%                       â”‚
        â”‚  â€¢ Low: <40%                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      BUILD TRIAGE ENTRY                   â”‚
        â”‚                                           â”‚
        â”‚  {                                        â”‚
        â”‚    "patient_id": "...",                   â”‚
        â”‚    "patient_name": "...",                 â”‚
        â”‚    "latest_health_score": 45.3,           â”‚
        â”‚    "health_score_delta": -23.4,           â”‚
        â”‚    "escalation_flag": true,               â”‚
        â”‚    "escalation_reasons": [...],           â”‚
        â”‚    "stability_index": 0.145,              â”‚
        â”‚    "adherence_score": 57.1,               â”‚
        â”‚    ...                                    â”‚
        â”‚  }                                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Add to        â”‚
                    â”‚  Triage List   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Next Patient? â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                   YES               NO
                    â”‚                 â”‚
                    â–¼                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Loop Back     â”‚  â”‚ SORT TRIAGE LIST â”‚
            â”‚ to Next       â”‚  â”‚                  â”‚
            â”‚ Patient       â”‚  â”‚ Priority:        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ 1. Escalation    â”‚
                               â”‚ 2. Risk Level    â”‚
                               â”‚ 3. Delta         â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   BUILD RESPONSE          â”‚
                        â”‚                           â”‚
                        â”‚   {                       â”‚
                        â”‚     "total_patients": 12, â”‚
                        â”‚     "escalated": 3,       â”‚
                        â”‚     "high_risk": 2,       â”‚
                        â”‚     "low_adherence": 4,   â”‚
                        â”‚     "patients": [...]     â”‚
                        â”‚   }                       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Return to Doctor  â”‚
                        â”‚  (JSON Response)   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Escalation Decision Tree

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Patient Data  â”‚
                    â”‚   (Last 14 Days)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Calculate Health Score â”‚
                â”‚ Delta (Current - Prev) â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                 â”‚
           Delta < -15?          Delta â‰¥ -15
                â”‚                 â”‚
               YES                â”‚
                â”‚                 â”‚
                â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ESCALATE      â”‚   â”‚ Check Gait      â”‚
        â”‚ Reason:       â”‚   â”‚ Pattern         â”‚
        â”‚ "Significant  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚  Decline"     â”‚            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚                 â”‚
                       3+ Consecutive      < 3 Days
                       Abnormal Days       Abnormal
                            â”‚                 â”‚
                           YES                â”‚
                            â”‚                 â”‚
                            â–¼                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ESCALATE      â”‚   â”‚ Check Pressure  â”‚
                    â”‚ Reason:       â”‚   â”‚ Distribution    â”‚
                    â”‚ "Consecutive  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚  Abnormal     â”‚            â”‚
                    â”‚  Gait"        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚
                                   2+ Days           < 2 Days
                                   Pressure < 0.5    Normal
                                        â”‚                 â”‚
                                       YES                â”‚
                                        â”‚                 â”‚
                                        â–¼                 â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ ESCALATE      â”‚   â”‚ Check Skin Risk â”‚
                                â”‚ Reason:       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ "Low Pressure â”‚            â”‚
                                â”‚  Distribution"â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚
                                               2+ Days           < 2 Days
                                               High Risk         Normal
                                                    â”‚                 â”‚
                                                   YES               NO
                                                    â”‚                 â”‚
                                                    â–¼                 â–¼
                                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚ ESCALATE      â”‚   â”‚ NO          â”‚
                                            â”‚ Reason:       â”‚   â”‚ ESCALATION  â”‚
                                            â”‚ "High Skin    â”‚   â”‚             â”‚
                                            â”‚  Risk"        â”‚   â”‚ Flag = falseâ”‚
                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Sorting Priority Logic

```
Triage List: [Patient A, Patient B, Patient C, Patient D]

Step 1: Group by Escalation Flag
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESCALATED (flag = true)         â”‚
â”‚ â€¢ Patient A                     â”‚
â”‚ â€¢ Patient C                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOT ESCALATED (flag = false)    â”‚
â”‚ â€¢ Patient B                     â”‚
â”‚ â€¢ Patient D                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Within Each Group, Sort by Risk Level
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESCALATED                       â”‚
â”‚ â€¢ Patient A (High Risk)         â”‚
â”‚ â€¢ Patient C (Moderate Risk)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOT ESCALATED                   â”‚
â”‚ â€¢ Patient B (Moderate Risk)     â”‚
â”‚ â€¢ Patient D (Low Risk)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Within Each Risk Level, Sort by Delta (Most Negative First)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESCALATED                       â”‚
â”‚ â€¢ Patient A (High, Î” = -23.4)   â”‚
â”‚ â€¢ Patient C (Moderate, Î” = -8.2)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOT ESCALATED                   â”‚
â”‚ â€¢ Patient B (Moderate, Î” = -5.1)â”‚
â”‚ â€¢ Patient D (Low, Î” = +2.3)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Final Sorted List:
1. Patient A (Escalated, High Risk, Î” = -23.4)
2. Patient C (Escalated, Moderate Risk, Î” = -8.2)
3. Patient B (Not Escalated, Moderate Risk, Î” = -5.1)
4. Patient D (Not Escalated, Low Risk, Î” = +2.3)
```

---

## ğŸ§® Metric Calculation Examples

### Health Score Delta
```
Current Week Records:
Day 1: 48.5
Day 2: 45.2
Day 3: 42.8
Day 4: 46.1
Day 5: 44.3
Day 6: 43.7
Day 7: 45.0

Current Week Average = (48.5 + 45.2 + 42.8 + 46.1 + 44.3 + 43.7 + 45.0) / 7
                     = 315.6 / 7
                     = 45.09

Previous Week Records:
Day 8: 68.2
Day 9: 70.1
Day 10: 69.5
Day 11: 67.8
Day 12: 71.2
Day 13: 68.9
Day 14: 69.7

Previous Week Average = (68.2 + 70.1 + 69.5 + 67.8 + 71.2 + 68.9 + 69.7) / 7
                      = 485.4 / 7
                      = 69.34

Health Score Delta = 45.09 - 69.34 = -24.25

âœ… ESCALATE (Delta < -15)
```

### Stability Index
```
Gait Symmetry Values (Last 7 Days):
Day 1: 0.82
Day 2: 0.78
Day 3: 0.65
Day 4: 0.88
Day 5: 0.72
Day 6: 0.69
Day 7: 0.81

Mean = (0.82 + 0.78 + 0.65 + 0.88 + 0.72 + 0.69 + 0.81) / 7 = 0.764

Variance = [(0.82-0.764)Â² + (0.78-0.764)Â² + ... + (0.81-0.764)Â²] / 7
         = [0.0031 + 0.0003 + 0.0130 + 0.0135 + 0.0019 + 0.0055 + 0.0021] / 7
         = 0.0394 / 7
         = 0.00563

Stability Index (Std Dev) = âˆš0.00563 = 0.0750

Classification: Moderate Variability (0.05 < 0.0750 < 0.12)
```

### Adherence Score
```
Uploads in Last 7 Days: 4

Adherence Score = (4 / 7) Ã— 100 = 57.14%

Classification: Moderate Compliance (40% â‰¤ 57.14% < 70%)
```

---

## ğŸ” Consecutive Pattern Detection

### Example: 3+ Consecutive Abnormal Gait Days

```
Daily Records (Sorted by Date):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Date   â”‚ Gait Abnormalityâ”‚ Consecutiveâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Feb 10   â”‚ Normal          â”‚     0     â”‚
â”‚ Feb 11   â”‚ Abnormal        â”‚     1     â”‚
â”‚ Feb 12   â”‚ Abnormal        â”‚     2     â”‚
â”‚ Feb 13   â”‚ Abnormal        â”‚     3     â”‚ âœ… TRIGGER
â”‚ Feb 14   â”‚ Normal          â”‚     0     â”‚
â”‚ Feb 15   â”‚ Abnormal        â”‚     1     â”‚
â”‚ Feb 16   â”‚ Abnormal        â”‚     2     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: ESCALATE (3 consecutive abnormal days detected on Feb 13)
```

---

## ğŸ“ˆ Real-World Scenario

### Patient: John Doe (Age 58, Male)

**Week 1 (Days 8-14)**:
- Average Health Score: 68.7
- Gait: Mostly normal (1 abnormal day)
- Skin Risk: Low
- Uploads: 6/7 days (85.7% adherence)

**Week 2 (Days 1-7)**:
- Average Health Score: 45.3
- Gait: 5 abnormal days (3 consecutive)
- Skin Risk: 2 high-risk days (consecutive)
- Uploads: 6/7 days (85.7% adherence)

**Computed Metrics**:
```json
{
  "patient_name": "John Doe",
  "latest_health_score": 42.5,
  "weekly_avg_health_score": 45.3,
  "previous_week_avg_health_score": 68.7,
  "health_score_delta": -23.4,
  
  "overall_clinical_risk": "High",
  
  "escalation_flag": true,
  "escalation_reasons": [
    "Significant health score decline (Î” < -15)",
    "3+ consecutive abnormal gait days detected",
    "High skin risk for 2+ consecutive days"
  ],
  
  "stability_index": 0.1456,
  "stability_classification": "Unstable",
  
  "abnormal_days_last_7": 5,
  "high_skin_risk_days_last_7": 2,
  
  "adherence_score": 85.7,
  "adherence_status": "Good Compliance"
}
```

**Clinical Action**:
1. **Immediate**: Call patient within 24 hours
2. **Assessment**: Schedule urgent prosthetic evaluation
3. **Intervention**: Likely socket adjustment needed (unstable gait + high skin risk)
4. **Follow-up**: Daily monitoring for next week

---

**This diagram illustrates the complete triage system logic flow from request to response.**
